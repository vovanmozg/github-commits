Merge pull request #183 from bkeepers/unmaintained
clarify status
Fix Tempfile usage under ruby 1.8.7
Merge pull request #157 from github/atomic-object-writes
fsync loose objects before moving into place
make object writes atomic
Merge pull request #149 from shepmaster/patch-1
Correct spelling of "represent"
Merge pull request #140 from sbryant/fix_rev_parse
Fix an edge case in rev_parse.
Merge pull request #111 from pda/patch-2
Minor typo fix: “buy” → “by”.
Release 2.5.0
Update History.
omg grit why do you try to be as slow as possible with everything
Grit::Blame can load lines from cache
git ls-tree raises on non-zero exit
Merge pull request #103 from peff/master
support large packfiles with index v2
100% Git-compliant actor creation
Properly print time offsets
handle newlines in author / committer
Merge pull request #78 from kevinsawicki/patch-1
Fix typo in tree method doc
remove tests for stuff @schacon removed
Grit::Git check_applies / patch related methods take command hash
tags api now resty
start using the GitRuby::GitObject types in the Git data api
we are not using these anymore. they are confusing
ruby rev_list passes --verify to native rev_parse in fallback
Merge pull request #71 from injekt/master
Merge pull request #72 from cesario/master
Remove missing files from gemspec
remove commented out lazy_reader
fix warnings on Ruby 1.9
get rid of sample hooks in test fixture repo
Merge remote branch 'origin/github'
bump posix-spawn dependency to latest w/ jruby support
Merge branch 'posix-spawn'
remove all the grit jruby hacks in favor of updated posix-spawn
Merge branch 'patch-id' into github
tree reading and writing
hm, guess we actually need this
reference updating and deleting working
git refs api read stuff working and tested
tag creation and tests
updates to grit for tag api
commit listing and writing api
write_tree can take a sha for a tree and can return the last tree size via an instance var
Add Commit#patch_id.
Merge pull request #60 from dkowis/fixing-spaces
Merge pull request #68 from bobbyw/master
fix default parameter for with_timeout
Merge remote branch 'origin/master' into github
handle packs disappearing between dir list and open
Merge remote branch 'origin/master' into github
Repo#parse_batch properly skips over objects that can't be parsed
Grit::Index#commit with hash params defaults head to nil
rewrite the merge commit when someone hits the button
Merge remote branch 'origin/posix-spawn' into github
Merge branch 'fixing-spaces' of github.com:dkowis/grit into fixing-spaces
Another fix for spaces in files
Fix for files with leading or trailing spaces
Fix for files with spaces, including tests
remove Grit::Process in favor of POSIX::Spawn::Child
better rev_parse errors
include stderr output in Grit::Git::CommandFailed errors
fix ruby rev-list implementation not handling array of refs
update History for argv fixes
fix argv passing in Repo#diff_objects
fix argv passing in Repo#objects and Repo#commit_objects
Grit::Git#native can return [0, out, err] tuple instead of just stdout
Grit::Git::CommandFailed can take a single message argument
history
Merge branch 'loose_bytesize_fix' of https://github.com/hiroshi/grit into hiroshi-loose_bytesize_fix
Release 2.4.1
add docs to the patch methods
mark this day in history
when #check_applies fails, add the exitstatus to the accumulated status return value
replace the old #raw_git stuff with #native calls for the git patching methods
add tests for git patching
Release 2.4.0
open3_detach is no longer with us
v2.3.2
Fix a ruby 1.9 encoding problem, "LooseObjectError: size mismatch" by committing non-ASCII content.
Blame loads all commits in single Repo#batch call
update History.txt for exec-direct branch changes
Merge remote branch 'origin/exec-direct'
get jruby working to the point it was before
pull pipe logic out into popen4-ish method
better process :timeout and :max tests
fix bad signal arity
use native Process::spawn on Ruby 1.9
get git_max_size support working again
get command timeout support working again
open3_detach.rb no longer needed
Grit::Git uses Grit::Process for all native command invocations
refactor new exec logic into Grit::Process class
open3 based Git#run method also supports :input option
Repo#batch uses new input option instead of block
handle git process input that exceeds max pipe buffer
don't leave zombies around when testing support for fork(2)
emulate native :env option when fork not available
avoid searching for git binary at load time
Git#native can optionally raise an exception when command exits non-zero
Git#native takes environment for git child process
separate argv in calls to Git#native
avoid /bin/sh + escaping; exec git commands directly
locate git_binary on PATH at boot
update History.txt with bug fix merges
Merge remote branch 'ohnobinki/master'
Merge remote branch 'koraktor/fix-init-bare'
Merge commit 'bfe14d6403fd701cb131'
less fragile actor output test
typo
fix relative alternates paths
avoid exists check when loading alternates
fix issue where Repo#diff skips the first diff
fix regression in Grit::Index#commit
Fixed and improved Repo.init_bare tests
Fixed Repo.init_bare for non ".git" suffixes
document rtomayko's perf enhancements
Merge branch 'perf'
fix regression with actor argument in Grit::Index#commit
set parent correctly from options passed to Grit::Index#commit
update history
allow Index#commit to specify separate authors and committers with correct timezones for the timestamps
Index#commit takes options and can specify a custom committed date
packing and unpacking uses String#<< instead of String#+
Git#sh uses 8K buffers instead of 1K
use String#<< instead of String#+ in Git#sh and Git#wild_sh
Make test_tag.tb agnostic to the the ordering of tags in Grit::Repo's tag list. Fixes issue 34.
extract Grit::Repo#parse_batch
update history
add Grit::Repo#batch for getting multiple commits in a single native git call.
backport from github, attempt to load mime-types locally before loading rubygems
update history
backport zero-padding bugfix from github
git-notes backport from github
explicitly make the Grit data classes lazily loaded (instead of every single ruby object).  Also, add attr_writer(:lazy_source) for lazy objects
Release 2.3.0
Update Readme.
Update tomdoc for Repo#initialize.
Update history for ruby 1.9 compat.
Ruby 1.9 compatibility
Add Repo#init.
Fixed gemspec homepage
2.2.1 history
revert Grit::Index#commit default value for parents arg
Update History for 2.2.0 release.
Release 2.2.0
Add Grit::Index#delete to allow deletions of files from the index.
Added attr_reader for @files in Status
Fix release tag pushing.
Release 2.1.0
Fix Repo#diff (was throwing an exception).
update Repo#head.commit test
make repo.head a Head instead of string
test Repo#head.commit
update history
Merge branch 'diff_renames' into diffs
merge, update history
track renames in git diff
GRIT_REPO constant defaults to current dir
Grit::Commit#diffs and Grit::Commit.diffs both take a git options hash that is passed to diff --git a/History.txt b/History.txt index d53b179..0a61ff5 100644 --- a/History.txt +++ b/History.txt @@ -3,6 +3,8 @@      * Add support for parsing annotated tag objects.      * Add Grit::Repo#recent_tag_name for getting the latest tag name that is        reachable in a commit. +    * Grit::Commit#diffs and Grit::Commit.diffs both take a git options hash +      that is passed to `git diff`.    * Bug Fixes      * Add no_quote option for fixing tag listings.      * Raise custom exceptions on invalid tree objects.
Update history.
Exclude test dir from gem.
Update to use RakeGem.
Fix tests for Git 1.7.
Update from GitHub.
merge in tag_annotations branch, add to history
Merge branch 'tag_annotation' into epic
merge fixes from github, add to history
raise custom exception when invalid objects found in tree
merge in tag listing fix
default to commit for missing tag attributes
parse tagger/tag_date info from annotated tags.  default to commit author/authored_date on lightweight tags
handle the inability to read missing tag messages
add lightweight tag message parsing
add annotated tag message parsing
return nil from Repo#recent_tag_name if the given committish is invalid
revelation: --abbrev and --long options give me the output i really want
add Grit::Repo#recent_tag_name for getting the result of `git describe` on a repo
implement select_existing_objects
Make pure-ruby `ls-tree -r` work with commits
Ironically, that last commit broke the tests for me.
Get test suite 100% green
close open files as soon as possible
raise NoSuchPath with no tree in ls_tree_path
`git ls-tree -r SHA`
Pass along the options to Real Git on a rev-parse miss
left out a period
fix description assertion
add merge commit diff support
allow diff to only take one sha
Regenerated gemspec for version 2.0.0
Version bump to 2.0.0
update history for 2.0.0 release
updates for readme
massive whitespace removal
fix tests
fix tags
change default bareness
remove redundant fs methods
back out work-tree change, it was breaking github
do not fail for stupidity of mime-types in rubygems <= 1.2.0
update history
Merge branch 'master' into smoke
Make another attempt to identify new and deleted files in Grit#Diff
Ensure RubyGit's diff matches real Git's output
Fix RubyGit's diff to detect additions and deletions
use a \t to avoid tab => space conversion
add contributing section to readme
have Commit#short_message use first non-empty message line. closes gh-1.
Merge commit 'b06e7ff41ad95b6fe1dbd08df7530c9d5bf76840' into smoke
windows support
update history
Merge commit 'a88d1d96985074db9c37f3f50a45fd089d8b4a12' into smoke
further file system abstractions
allow setting of options to false to override true defaults
more terse and more correct
sets --work-tree so that adds work
a few lines on gems required for testing
refactor more methods into git-ruby
facilitate git proxying
abstract all file system calls into git class
update history and rakefile for 1.1.1
Regenerated gemspec for version 1.1.1
Version bump to 1.1.1
exclude test dir from gem manifest
Regenerated gemspec for version 1.1.0
Version bump to 1.1.0
update history for 1.1.0 release
match version file to history
a_commit and b_commit are really a_blob and b_blob
update history
Merge commit '32c925032560acb95905878af1d45384e0735c64' into next
update history
better comments for Repo#archive_to_file
Merge commit '73b32da6cb22abc88fbe7588be97dfc169da17c2' into next
update history
Merge commit '1ab3ab760dc144d252299afb729269aa8d3a1c48' into next
update history
merge d34d53 and fix whitespace conflicts
update history
Merge branch 'js/master' into next
convert readme to markdown
Added <=> method, needed for sorting tree
Added two shortcut methods, for picking trees/blobs only
Fixed gem builing
Fixed test that relied on using git v1.6.0
Added a shortcut for commit_stats as Commit#stats
Further Ruby 1.9 compat; IO#getc can return a string in 1.9
Rename the GitRuby Mmap class to FileWindow, since it's not really mmap'ed at all (except for any OS level caching)
Add a #basename method to Submodule, Blob and Tree for retrieving the name without the path
Make Grit::Submodule grasp the concept of non-unix lineendings
Added Repo#commit_deltas_from as a (fairly expensive and lazy) way of getting the commits that differ between two different repositories
do some mild shell escaping when running commands
set an even lower timeout in the test_raises_on_slow_shell test, to make it pass on machines faster than an Atari
Fixed annoying ruby1.9 loadpath errors
Open binary files with the 'b' option to force binary string encoding (ASCII-8BIT)
Use [<string>] instead of <string>.to_a to create an array from a string
Define String#getord(offset) for accessing a single byte at a String offset
Remove trailing ':' from when clauses in case statement
Make ls_tree ignore nils
Remove stray `puts`
Update version and History.txt
Add Grit::Commit#to_patch
Whoops - use the variable we already created for clarity
Simplify tag test a tad
Add packed-refs annotated tag support.
Add support for annotated tags to Grit::Tag
Regenerated gemspec for version 1.0.2
Version bump to 1.0.2
dynamic version method
fix dates in history
Regenerated gemspec for version 1.0.1
add diff-lcs dep
Version bump to 1.0.1
update summary and description meta
fix require statement in readme usage example
update install instructions
Make the number of bytes to be read from git's stdout configurable.
Regenerated gemspec for version 1.0.0
switch ot using Jeweler for packaging tasks, and up to version 1.0.0
stricter method of guessing if the ref is a sha
Repo.archive_to_file accepts extra parameters making plain zipping possible
fixed refs handling, added gc auto, updated tests, removed superfluous head.rb
Merge commit 'phedders/rdocs'
added some blame and merge stuff
Some rdoc changes
Calculate the net change for a particular diffstat
Don't split git logs that contain blank lines into two CommitStats.
Make dealing with commit stats a little more pleasant.
Handle commit stats that summarize commits with binary changes.
ignore *.gem
add open3_detach to gemspec file list
up to 0.9.4
update gemspec file list
update readme
digest is in stdlib
Merge branch 'open3'
Merge branch 'master' of git@github.com:mojombo/grit
Require open3_detach for Ruby and open3 for JRuby
Patch popen3 so Process.detach is called if exception is thrown
Use Open3 instead of Open4
just rescue the timeout errors, problem solved
only reraise timeout exceptions
poetry mode a few lines
up git_timeout to 10
more efficient commit count
confirm sha is a string
raise exception instead of trying to proceed
verify string is a string
bad sha handling
handle empty arguments and bad shas
remove more test warnings
Merge branch 'master' of git://github.com/pjhyett/grit into pjhyett/master
Remove Process.kill and trap(CHLD), users can handle their own process recovery to suit their needs
Merge branch 'master' of git://github.com/pjhyett/grit into pjhyett/master
fix submodule config parsing to deal with arbitrary submodule names
eliminate ivar uninitialized warnings
merge and resolve schacon/master
dammit, this is the second time this has reverted
add submodule detection
modified index to create refs/heads if it is not there
Add diff-lcs dependency
Add dependency for Open4
merged recent changes: * accepts relative alt paths * orders tree writes properly * can init a git repo
updated the Manifest file
fixed alternates to accept relative paths and changed fixtures
added sha() def to commit object
Merge branch 'idx2'
updated packfile code to recognize index v2
merged in bryces changes and fixed some testing issues
fixed a log issue
Clarify how to get a full count out of Repo#commits
Appropriate time-zone test fix from halorgium
fixed manifest and grit.rb to make correct gemspec
added lib/grit/commit_stats.rb to the big list o' files
cleared out errors by adding in Grit::Git#run method
resolved merge conflicts, hopefully amicably
Fix CommitDb errors in test (was this the right fix?)
test_commit no longer fails if you're not in PDT
Use the appropriate method to find a first occurrence
more cleanly accept separate options for initializing a bare repo
needed to be able to ask Repo.new to work with a bare repo
empty commit to push project to runcoderun
updated grit gemspec
including code from github updates
whitespace
whitespace
updated grit gemspec
including code from github updates
pulled in changes from github
oops, update version here too
push 0.8.3
capture stderr and log it if debug is true when running commands
update history
patched bare rev-list to use FileIndex (for paging commit count) FileIndex now understands tree changes makes GitHub use almost no git calls, and can up max list over 30
folded file_index into git-ruby
added library for a simple index that helps with blame-tree type operations
some docs
update gemspec to include the newly added files to manifest
add missing files to manifest; add grit test
allow sending debug messages to a user defined logger if provided; tests for it
pull out the date in this assertion and compare as xmlschemaw, to avoid breakage due to time zone dependancy
Removed debug print.
Fixed to close opened file description.
updated git-ruby so it doesnt call rev_list natively with no options
added a single call blame-tree - pure ruby is not fast enough yet improved pure ruby blame-tree performance added option to have packfiles pre-cached
initial working version, but it is much, much too slow
updated refs to not include directories (duh), fixed unit tests to not expect Git calls modified initilization method to accept flag to force it to see a bare dir
got the diff to work properly and tested with actual github usage - am outputing big warnings of git usage to stdout for debugging
added a pure-ruby alternative to diff passed rev-list through if --skip == 0, which is most of the time
same as before - opening even fewer files
duh - was opening the same file twice in a nested call - that cant be good
removed debugging
testing out filehandle refactoring - may be quite a bit slower though
updated rev-list to accept a range, too
added rev-list back into the git-ruby overrides
fixed ls_tree to take paths properly
ls-tree recursive path search works now
fixed deep path ls-tree
added commit_stats stuff
added code extracted from Gist work
added examples
rewrote the index implementation to write in pure ruby, which both speeds things up and deals with content much better
added some simple write ops : add, remove, commit
bunch of changes
bunch of the log stuff is fixed - added benchmarks
dude - way faster
memcached - kinda slow
more workin
rearranged and commented the repository GitRuby file
small bugfix
added pure ruby ls-tree support, too
added the rest of the test git files
added a pure-ruby git library and converted the cat_file commands to use it
added a git directory to the testing dir for current and future testing
proof of concept for commits to a bare repo
Updated manifest.txt to include new ref & remote classes
added refs super class for tag & head + added remote subclass
up to 0.8.1
grit gems are now exclusively available via gems.github.com!
a few more little gemspec fixes
gemification updates
fix repo browse address
fix gemspec
up to 0.8.0 and add gemspec
Fix the to_hash test to run in US/Pacific time
ignore errors from SIGCHLD on trap
Merge branch 'master' of git://github.com/dustin/grit
Added a method for getting the current branch.
timeout code and tests
add timeout protection to grit
support for heads with slashes in them
require time for xmlschema
Merge branch 'defunkt' into local
Merge branch 'master' of git://github.com/halorgium/grit into halorgium
Merge branch 'master' of git://github.com/evilchelu/grit into evilchelu
Merge branch 'master' of git://github.com/kamal/grit into kamal
do not screw up diffs that have files with spaces in them
Touch up Commit#to_hash
Merge branch 'master' of git://github.com/mojombo/grit into mojombo/master
add in Commit#to_hash method
Add write support to the git configuration
Don't add .git to "bare" repositories as it is unnecessary.
Add support for accessing repository configuration values
don't crash when diffing and last pair only contains file mode changes
allow letters in git version test
enable --all for Commit.find_all
Tiny fix to add mime-types as a dependency in Hoe's extra_deps
do not strip leading spaces from commit messages
repsect blank lines in commit messages
get full message from commits as well
Merge branch 'lazy_delegator'
Merge branch 'mojombo'
fix diffs for mode only changes
merge from technoweenie
Update tests to not use fixed absolute paths
compact Commit contents from Trees so that #/(path_to_commit) doesn't raise a NoMethodError on NilClass#name.
better alternates behavior
add alternates getter and setter
better alternates behavior
add alternates getter and setter
add to Commit::Diff tests so we know the right filename is parsed
allow Grit::Commit.diff to specify an optional array of paths
add tag support
wip
fix bug in diff caused by new mode
deal with empty initial commit
Merge branch 'master' of git://github.com/defunkt/grit into d3
add Repo#commit_count
fix quoting problem for Repo#log
Merge branch 'mojombo'
quote all git parameters
add commits_since
display the first commit of a repo without dying
Merge branch 'mojombo'
add enable/disable daemon serve
add options to Repo.init_bare
update readme with github location
add options to fork_bare
Merge branch 'master' of git://github.com/defunkt/grit into defunkt2
add fork_bare
add Repo#commits_between
rake site
prepare for public release
Merge branch 'mojombo'
add Commit#mime_type
Merge branch 'mojombo'
abbreviated sha1 and archiving
fix tests on other machines
rework lazy some to be more of a delegator
add #diffs to commit object
fix commit-diff deleted file bug
implement commit diff
add Actor#to_s as alias to Actor#name
git-log support
prepare for packaging as gem
dynamically rewrite ruby style git options
more readme
begin readme
add Actor inspect
add Actor class to encapsulate name and email
fix some initialization warnings
implement repo level diff
add Tree./ to ease getting subtrees
better errors for Repo.new
clear info hash in Blob.blame and update the doc
implement Blob.blame
implement Repo.init_bare
add Repo.blob
implement Blob.data and Blob.size
commit now returns Tree object for tree attribute
add inspects to objects
add Blob
add lazy computation of tree contents
started implementing Tree
more code comments throughout
add comments and make Comment.parents return Commits
big refactor to do lazy loading
branches is alias of heads
implement Repo#commit and begin on Repo#tree
more commits tests
handle multiline commit messages
move heads logic into Head
implement Repo.commits
implement Repo#branches
convert to Grit module, refactor to be more OO
add more comments throughout
clean up heads test
stub git call for Grit#heads test
implement Grit#heads
initial grit setup